<% @posts.each do |post| %>

  <h2>From: <%= link_to post.user.username, user_wall_url(post.user.id) %></h2>
  
  <% if post.wall && post.wall.id != 0 && post.wall.id != post.user.id %>
    <h2>To: <%= link_to post.wall.username, user_wall_url(post.wall.id) %></h2>
  <% end %>

  <h2> Message: <%= post.message %></h2>
  <h3> Created at: <%= post.updated_at %></h3>

  <% if current_user.id == post.user_id %>
    <%= link_to 'Edit', edit_post_path(post) %>
    <%= link_to 'Delete', post, method: :delete, data: { confirm: 'Are you sure?' } %>
  <% end %>

  <% if post.comments %>
    <% post.comments.each do |c| %>
      <br/>
      user:
      <%= c.user.username %>
      <br/>
      comment:
      <%= c.content %>

      <%if c.user == current_user %>
        <%= link_to "Delete", post_comment_path(post, c), method: :delete %>
      <%end%>

    <% end %>
  <% end %>

  <%= form_for [post, post.comments.new ] do |f| %>
    <%= f.label :comment %>
    <%= f.text_field :content %>
  <% end %>

  <p>Likes: <%= post.likes.size %> ||
  <%= link_to 'Like', post_add_like_path(post), method: :post %></p>

<% end %>

<%= link_to "New post", new_post_path %>
